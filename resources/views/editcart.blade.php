<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <meta property="og:title" content="JivaJoy" />
    <meta property="og:type" content="Website" />
    <meta property="og:url" content="https://jivajoy.id/" />
    <meta property="og:description"
        content="Aromaterapi 2in1 (Inhaler & Roll On) dari Kemangi dan Cendana Sebagai Upaya Mencegah Baby Blues dengan Kemasan Website Terintegrasi" />
    <meta name="description" content="Aromaterapi 2in1 (Inhaler & Roll On) dari Kemangi dan Cendana Sebagai Upaya Mencegah Baby Blues dengan Kemasan Website Terintegrasi">
    <title> JivaJoy | Edit Keranjang</title>
    <link rel="stylesheet preload" as="style" href="/css/preload.min.css" />
    <link rel="stylesheet preload" as="style" href="/css/libs.min.css" />
    <link rel="stylesheet" href="/css/index.css" />
    <link rel="shortcut icon" type="image/x-icon" href="/img/logo.svg">
    <link rel="stylesheet" href="/css/product.min.css" />
</head>

<body>
    @include('partials.navbar')
    <!-- Single product content start -->
    <main>
        <section class="about section--nopb">
            <div class="container">
                <!-- Product main -->
                <div class="about_main d-lg-flex flex-nowrap">
                    <div class="about_main-slider">
                        <div class="about_main-slider--single" data-modal="false">
                            <div class="swiper-wrapper">
                                <div class="swiper-slide">
                                    <a href="/img/product1.png" data-role="gallery">
                                        <picture>
                                            <source
                                                data-srcset="/img/product1.png"
                                                srcset="/img/product1.png"
                                                type="image/webp" />
                                            <img
                                                class="lazy"
                                                data-src="/img/product1.png"
                                                src="/img/product1.png"
                                                alt="media" />
                                        </picture>
                                    </a>
                                </div>
                                <div class="swiper-slide">
                                    <a href="/img/box.png" data-role="gallery">
                                        <picture>
                                            <source
                                                data-srcset="/img/box.png"
                                                srcset="/img/box.png"
                                                type="image/webp" />
                                            <img
                                                class="lazy"
                                                data-src="/img/box.png"
                                                src="/img/box.png"
                                                alt="media" />
                                        </picture>
                                    </a>
                                </div>
                                <div class="swiper-slide">
                                    <a href="/img/product.png" data-role="gallery">
                                        <picture>
                                            <source
                                                data-srcset="/img/product.png"
                                                srcset="/img/product.png"
                                                type="image/webp" />
                                            <img
                                                class="lazy"
                                                data-src="/img/product.png"
                                                src="/img/product.png"
                                                alt="media" />
                                        </picture>
                                    </a>
                                </div>
                            </div>
                            <div class="swiper-controls d-flex align-items-center justify-content-between">
                                <a class="swiper-button-prev d-inline-flex align-items-center justify-content-center" href="#">
                                    <i class="icon-caret_left icon"></i>
                                </a>
                                <a class="swiper-button-next d-inline-flex align-items-center justify-content-center" href="#">
                                    <i class="icon-caret_right icon"></i>
                                </a>
                            </div>
                        </div>
                        <div class="about_main-slider--thumbs">
                            <div class="swiper-wrapper">
                                <div class="swiper-slide">
                                    <picture>
                                        <source
                                            data-srcset="/img/box.png"
                                            srcset="/img/box.png"
                                            type="image/webp" />
                                        <img
                                            class="lazy"
                                            data-src="/img/box.png"
                                            src="/img/box.png"
                                            alt="media" />
                                    </picture>
                                </div>
                                <div class="swiper-slide">
                                    <picture>
                                        <source
                                            data-srcset="/img/product.png"
                                            srcset="/img/product.png"
                                            type="image/webp" />
                                        <img
                                            class="lazy"
                                            data-src="/img/product.png"
                                            src="/img/product.png"
                                            alt="media" />
                                    </picture>
                                </div>
                                <div class="swiper-slide">
                                    <picture>
                                        <source
                                            data-srcset="/img/product1.png"
                                            srcset="/img/product1.png"
                                            type="image/webp" />
                                        <img
                                            class="lazy"
                                            data-src="/img/product1.png"
                                            src="/img/product1.png"
                                            alt="media" />
                                    </picture>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="about_main-info">
                        <div class="about_main-info_product align-items-center justify-content-between">
                            <h2 class="title">JivaJoy: Aromatherapy 2in1
                                (Inhaler & Roll On) </h2>
                            <h4 class="harga mt-2">Rp 30.000</h4>
                        </div>
                        <!-- <div class="about_main-info_rating d-flex align-items-center">
                                <ul class="stars d-flex align-items-center accent">
                                    <li class="stars_star">
                                        <i class="icon-star_fill"></i>
                                    </li>
                                    <li class="stars_star">
                                        <i class="icon-star_fill"></i>
                                    </li>
                                    <li class="stars_star">
                                        <i class="icon-star_fill"></i>
                                    </li>
                                    <li class="stars_star">
                                        <i class="icon-star_fill"></i>
                                    </li>
                                    <li class="stars_star">
                                        <i class="icon-star_fill"></i>
                                    </li>
                                </ul>
                                <a class="reviews-amount" href="#reviews">(2 customer reviews)</a>
                            </div> -->
                        <h4>Deskripsi</h4>
                        <p class="about_main-info_description">
                            Aromatherapy 2in1 (Inhaler & Roll On) dari Kemangi dan Cendana sebagai Upaya Pencegahan Baby Blues dengan Integrated Website Packaging
                        </p>
                        <div class="row d-flex flex-colum flex-md-row g-2 mb-5">
                            <div class="col-12 col-md-6">
                                <h4>Komposisi</h4>
                                <ul class="about_main-info_list mt-1">
                                    <li class="list-item">
                                        <span class="value">Mentol 24% b/v</span>
                                    </li>
                                    <li class="list-item">
                                        <span class="value">Camphor 24% b/v</span>
                                    </li>
                                    <li class="list-item">
                                        <span class="value">Metil Salisilat 24% v/v</span>
                                    </li>
                                    <li class="list-item">
                                        <span class="value">Minyak cendana 48% v/v</span>
                                    </li>
                                    <li class="list-item">
                                        <span class="value">Minyak kemangi 28% v/v</span>
                                    </li>
                                </ul>
                            </div>
                            <div class="col-12 col-md-6">
                                <h4>Informasi Produk</h4>
                                <ul class="about_main-info_list mt-1">
                                    <li class="list-item">
                                        <span class="property">Category:</span>
                                        <span class="value">Oil</span>
                                    </li>
                                    <li class="list-item">
                                        <span class="property">Size Inhaler:</span>
                                        <span class="value">2ml</span>
                                    </li>
                                    <li class="list-item">
                                        <span class="property">Size Roll On:</span>
                                        <span class="value">5ml</span>
                                    </li>
                                    <li class="list-item">
                                        <span class="property">Varian</span>
                                        <span class="value">Hot and Warm</span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        @auth
                        <div class="order-section">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <h3>Pesan Produk</h3>
                                <p id="stock-info">
                                    @if($products->isEmpty())
                                    Produk sedang tidak tersedia!
                                    @else
                                    Jumlah stok yang tersedia {{ $cart->product->stok }} pcs
                                    @endif
                                </p>
                            </div>
                            <div class="input-order row d-flex flex-colum flex-md-row">
                                <!-- Jumlah Harga -->
                                <div class="price-section col-12 col-md-4 me-3" style="margin-bottom: 15px;">
                                    <p style="margin-right: 10px;" class="my-2 fs-5">Jumlah Harga</p>
                                    <h5 id="total-price" style="font-weight: bold;">Rp {{ number_format($cart->total_harga) }}</h5>
                                </div>

                                <!-- Jumlah Qty -->
                                <div class="quantity-section col-12 col-md-4 me-3" style="margin-bottom: 15px;">
                                    <p style="margin-right: 10px;" class="mt-2 fs-5">Jumlah</p>
                                    <div class="d-flex align-items-center w-100">
                                        <button type="button" id="decrease-qty">-</button>
                                        <input type="number" id="quantity" value="{{ $cart->qty }}" min="1" class="form-control text-center" readonly>
                                        <button type="button" id="increase-qty">+</button>
                                    </div>
                                </div>

                                <!-- Pilih Varian -->
                                <div class="variant-section col-12 col-md-3" style="margin-bottom: 15px;">
                                    <p style="margin-right: 10px;" class="mt-2 fs-5">Pilih Varian:</p>
                                    <select id="variant" class="form-select" required style="width: auto;">
                                        @if($products->isEmpty())
                                        <option selected>Tidak tersedia</option>
                                        @else
                                        @foreach ($products as $product)
                                        @if($product->stok > 0)
                                        <option value="{{ $product->id }}" data-stock="{{ $product->stok }}"
                                            {{ old('id_product', $cart->id_product) == $product->id ? 'selected' : '' }}>
                                            {{ $product->varian }}
                                        </option>
                                        @endif
                                        @endforeach
                                        @endif
                                    </select>
                                </div>

                            </div>

                            <div class="row d-flex flex-column flex-md-row w-100 my-3 g-3">
                                <!-- Form untuk Checkout -->
                                <form class="col-12" action="/carts/{{ $cart->id }}" method="POST" id="checkout-form">
                                    @method('put')
                                    @csrf
                                    <input type="hidden" name="id_customer" value="{{ auth()->user()->id }}">
                                    <input type="hidden" name="id_product" id="cart-variant">
                                    <input type="hidden" name="qty" id="cart-quantity">
                                    <input type="hidden" name="total_harga" id="cart-total-price">
                                    <button type="submit" style="border-radius: 30px;">
                                        <svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path fill-rule="evenodd" clip-rule="evenodd" d="M16.4745 13.106H19.7037C20.1933 13.106 20.578 12.7012 20.578 12.213C20.578 11.713 20.1933 11.3201 19.7037 11.3201H16.4745C15.9849 11.3201 15.6002 11.713 15.6002 12.213C15.6002 12.7012 15.9849 13.106 16.4745 13.106ZM23.539 6.91606C24.2501 6.91606 24.7164 7.16608 25.1827 7.71376C25.649 8.26143 25.7306 9.04722 25.6257 9.76039L24.5182 17.5707C24.3084 19.072 23.0494 20.1781 21.5689 20.1781H8.85046C7.3 20.1781 6.01767 18.9649 5.88944 17.3933L4.81694 4.41462L3.05664 4.10507C2.59034 4.02173 2.26393 3.55739 2.34553 3.08116C2.42713 2.5942 2.88178 2.27155 3.35974 2.34418L6.14007 2.7716C6.53643 2.84423 6.82787 3.1764 6.86284 3.58121L7.08434 6.24814C7.11931 6.63032 7.42241 6.91606 7.79545 6.91606H23.539ZM8.66371 22.0598C7.68447 22.0598 6.89175 22.8694 6.89175 23.8695C6.89175 24.8577 7.68447 25.6673 8.66371 25.6673C9.63129 25.6673 10.424 24.8577 10.424 23.8695C10.424 22.8694 9.63129 22.0598 8.66371 22.0598ZM21.7785 22.0598C20.7992 22.0598 20.0065 22.8694 20.0065 23.8695C20.0065 24.8577 20.7992 25.6673 21.7785 25.6673C22.7461 25.6673 23.5388 24.8577 23.5388 23.8695C23.5388 22.8694 22.7461 22.0598 21.7785 22.0598Z" fill="currentColor" />
                                        </svg>
                                        Perbarui Keranjang
                                    </button>
                                </form>
                            </div>
                        </div>
                        @else
                        <div class="row bg-danger w-100">
                            <a href="/login" class="button-login col-12 w-100 d-flex align-items-center justify-content-center">
                                <svg width="27" height="27" viewBox="0 0 27 27" fill="none" xmlns="http://www.w3.org/2000/svg" class="me-1">
                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M19.0466 7.875C19.0824 7.79527 19.0991 7.70838 19.0956 7.62111H19.125C18.9992 4.61915 16.5205 2.25 13.5056 2.25C10.4906 2.25 8.01194 4.61915 7.88612 7.62111C7.87129 7.7051 7.87129 7.79102 7.88612 7.875H7.79818C6.3565 7.875 4.81539 8.82671 4.36797 11.3851L3.49302 18.3541C2.77715 23.4708 5.41195 24.75 8.8521 24.75H18.1783C21.6085 24.75 24.1637 22.8977 23.5274 18.3541L22.6624 11.3851C22.1354 8.89835 20.6441 7.875 19.2223 7.875H19.0466ZM17.4299 7.875C17.3986 7.79394 17.382 7.70797 17.3809 7.62111C17.3809 5.46393 15.6261 3.71518 13.4615 3.71518C11.2968 3.71518 9.54207 5.46393 9.54207 7.62111C9.5569 7.7051 9.5569 7.79102 9.54207 7.875H17.4299ZM10.2341 13.6671C9.68501 13.6671 9.23986 13.209 9.23986 12.6438C9.23986 12.0786 9.68501 11.6205 10.2341 11.6205C10.7832 11.6205 11.2284 12.0786 11.2284 12.6438C11.2284 13.209 10.7832 13.6671 10.2341 13.6671ZM15.7523 12.6438C15.7523 13.209 16.1974 13.6671 16.7465 13.6671C17.2957 13.6671 17.7408 13.209 17.7408 12.6438C17.7408 12.0786 17.2957 11.6205 16.7465 11.6205C16.1974 11.6205 15.7523 12.0786 15.7523 12.6438Z" fill="currentColor" />
                                </svg>Masuk untuk melakukan pemesanan</a>
                        </div>
                        @endauth
                    </div>
                </div>
            </div>
        </section>

    </main>
    <!-- Single product content end -->

    @include('partials.footer')
    @include('partials.popup')

    <script src="/js/common.min.js"></script>
    <script src="/js/shop.min.js"></script>
    <script src="/js/script.js"></script>

    <script>
        document.getElementById('increase-qty').addEventListener('click', function() {
            var qty = document.getElementById('quantity');
            var selectedVariant = document.getElementById('variant');
            var maxStock = selectedVariant.options[selectedVariant.selectedIndex].getAttribute('data-stock');

            if (parseInt(qty.value) < parseInt(maxStock)) {
                qty.value = parseInt(qty.value) + 1;
                updatePrice();
            } else {
                alert('Jumlah melebihi stok yang tersedia!');
            }
        });

        document.getElementById('decrease-qty').addEventListener('click', function() {
            var qty = document.getElementById('quantity');
            if (parseInt(qty.value) > 1) {
                qty.value = parseInt(qty.value) - 1;
                updatePrice();
            }
        });

        document.getElementById('variant').addEventListener('change', function() {
            var selectedVariant = document.getElementById('variant');
            var stockInfo = selectedVariant.options[selectedVariant.selectedIndex].getAttribute('data-stock');
            var quantityInput = document.getElementById('quantity');

            // Tampilkan jumlah stok dari varian yang dipilih
            document.getElementById('stock-info').textContent = 'Jumlah stok yang tersedia ' + stockInfo + ' pcs';

            // Cek apakah kuantitas melebihi stok varian baru
            if (parseInt(quantityInput.value) > parseInt(stockInfo)) {
                alert('Jumlah melebihi stok yang tersedia!');
                // Atur kuantitas menjadi maksimal yang tersedia
                quantityInput.value = stockInfo;
            }

            // Update harga dengan kuantitas baru (jika ada perubahan)
            updatePrice();
        });


        function updatePrice() {
            var qty = document.getElementById('quantity').value;
            var variant = document.getElementById('variant').value;
            var pricePerItem = 30000;
            var totalPrice = qty * pricePerItem;

            document.getElementById('total-price').textContent = 'Rp ' + totalPrice.toLocaleString();

            // Update nilai input hidden di kedua form
            document.getElementById('cart-quantity').value = qty;
            document.getElementById('cart-total-price').value = totalPrice;
            document.getElementById('cart-variant').value = variant;

            document.getElementById('checkout-quantity').value = qty;
            document.getElementById('checkout-total-price').value = totalPrice;
            document.getElementById('checkout-variant').value = variant;
        }

        // Initial update for price when page loads
        updatePrice();
    </script>
</body>

</html>